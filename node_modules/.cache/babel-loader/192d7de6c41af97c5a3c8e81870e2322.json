{"ast":null,"code":"var _jsxFileName = \"C:\\\\cs\\\\pulmonic plus\\\\english-news-website\\\\src\\\\components\\\\home\\\\content\\\\centerModule.js\";\nimport React, { Component } from 'react';\nimport { Router, Route, Link, browserHistory } from 'react-router-dom';\nimport './centerModule.scss';\nimport Swiper from 'swiper/js/swiper.min.js';\nimport 'swiper/css/swiper.min.css';\nimport $ from 'jquery';\nimport \"animate.css\";\nimport Carousel from 'nuka-carousel';\n\nclass CenterModule extends Component {\n  constructor() {\n    super();\n    this.state = {\n      news: [],\n      headline_news: [],\n      type: '111',\n      repoName: '',\n      repoUrl: '',\n      page: 1,\n      more_news: true,\n      adv1: []\n    };\n  }\n\n  componentWillMount() {\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    console.log('1111');\n    fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=94821302-a50b-48dc-9252-964b708d1d40\", myFetchOptions).then(res => res.json()).then(data => {\n      console.log(data.list[0]);\n      this.setState({\n        news: data.list,\n        headline_news: data.list[0]\n      });\n    }).catch(error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n  }\n\n  componentDidMount() {\n    let mySwiper = new Swiper('.bottom-img-block', {\n      autoplay: false,\n      loop: true,\n      delay: 100,\n      speed: 700,\n      centeredSlides: false,\n      //为true设置模块居中\n      spaceBetween: 20,\n      //slide之间的距离\n      slidesOffsetBefore: 50,\n      //设定slides与wrapper左边框的偏移量\n      slidesOffsetAfter: 50,\n      //设定slides与wrapper右边框的偏移量\n      slidesPerView: 'auto',\n      observer: true,\n      //修改swiper自己或子元素时，自动初始化swiper\n      observeParents: true //修改swiper的父元素时，自动初始化swiper\n      // navigation: {\n      // \tnextEl: '.swiper-button-next',\n      // \tprevEl: '.swiper-button-prev',\n      // },\n\n    });\n\n    mySwiper.el.onmouseover = function () {\n      mySwiper.autoplay.start();\n    };\n\n    mySwiper.el.onmouseout = function () {\n      mySwiper.autoplay.stop();\n    }; // 广告\n\n\n    var myFetchOptions = {\n      //广告     0f484831-2031-450e-8173-3f470290f28a\n      method: 'GET'\n    };\n    fetch(\"http://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=f23cf76d-8c33-4c0a-9f0f-b1da8cd0e230\", myFetchOptions).then(response => response.json()).then(json => this.setState({\n      adv1: json.list\n    }));\n    console.log(this.state.news);\n  }\n\n  scrollFadeIn() {\n    let num = 0,\n        topArr = [];\n    $(\".center-module\").find(\".news-li-list\").each(function () {\n      topArr.push($(this).offset().top - $(window).height() + 25);\n    });\n    console.log(topArr);\n    $(window).scroll(res => {\n      if ($(window).scrollTop() > 5) {\n        $(\".center-module\").find(\".news-module\").addClass('fadeInUp');\n      }\n\n      if (num < topArr.length && $(window).scrollTop() > topArr[num]) {\n        $(\".center-module\").find(\".news-li-list\").eq(num).addClass('fadeInUp');\n        num += 1;\n      }\n    });\n  } // 在getDerivedStateFromProps中进行state的改变\n  // static getDerivedStateFromProps(nextProps, prevState) {\n  //     console.log(nextProps.categoryId);\n  //     console.log(prevState.categoryId);\n  //     return null;\n  // }\n  //\n\n\n  componentWillReceiveProps(nextProps) {\n    // 先做categoeyid选择 在做搜索选择 重新渲染组件 获得需要的新闻列表\n    console.log(nextProps.id);\n    console.log(this.props.id);\n\n    if (nextProps.categoryId != \"\") {\n      var myFetchOptions = {\n        method: 'GET'\n      };\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=\" + nextProps.categoryId, myFetchOptions).then(res => res.json()).then(data => {\n        this.setState({\n          news: data.list\n        });\n      }).catch(error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      });\n      return false;\n    } // 父组件把更新的search传进来了  如果为空字符 直接给他原始画面数据\n\n\n    if (nextProps.searchValue == \"\") {\n      var myFetchOptions = {\n        method: 'GET'\n      };\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=94821302-a50b-48dc-9252-964b708d1d40\", myFetchOptions).then(res => res.json()).then(data => {\n        this.setState({\n          news: data.list\n        });\n      }).catch(error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      });\n    } // 父组件把更新的search传进来了\n\n\n    if (nextProps.searchValue != \"\") {\n      var myFetchOptions = {\n        method: 'GET'\n      };\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?searchText=\" + nextProps.searchValue, myFetchOptions).then(res => res.json()).then(data => {\n        this.setState({\n          news: data.list\n        });\n      }).catch(error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.scrollFadeIn();\n  }\n\n  render() {\n    //  console.log(this.props.searchValue);\n    console.log(this.props.categoryId);\n    const settings = {\n      autoplay: true,\n      withoutControls: true,\n      wrapAround: true\n    };\n    console.log(this.state.news);\n    const {\n      headline_news\n    } = this.state;\n    let imgBack;\n\n    if (document.body.clientWidth > 0) {\n      let imgUrl = headline_news.bannerImage; // document.body.clientWidth > 1366 ？\n      //        let imgUrl = '/static/media/onePhoto.bb45fbbf.jpg';\n\n      const showImage = {\n        backgroundImage: 'url(' + imgUrl + ')'\n      };\n      imgBack = React.createElement(\"div\", {\n        className: \"img-back\",\n        style: showImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      });\n    } else {\n      imgBack = '';\n    }\n\n    const {\n      news\n    } = this.state;\n    const styeH3 = {\n      width: \"170px\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\"\n    };\n    const news_swiper = news.length ? news.map((newsItem, index) => React.createElement(\"div\", {\n      key: index,\n      className: \"swiper-slide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"javascript:;\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: newsItem.bannerImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, newsItem.headline)))) : 'We are loading news...';\n    const newsList = news.length ? news.map((newsItem, index) => React.createElement(\"li\", {\n      key: index,\n      className: \"news-li-list animated\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `details/${newsItem.newsId}`,\n      target: \"_blank\",\n      className: \"a-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"img-show\",\n      src: newsItem.bannerImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"text-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"author\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, newsItem.updatedDate), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, newsItem.author)), React.createElement(\"span\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, newsItem.headline), React.createElement(\"p\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, newsItem.description))), React.createElement(\"div\", {\n      className: \"big-imgShow\",\n      style: {\n        \"display\": (index + 1) % 5 == 0 ? 'block' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(Carousel, Object.assign({}, settings, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), this.state.adv1.map((newsItem, index) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"   \", React.createElement(\"img\", {\n        src: newsItem.bannerImage,\n        style: {\n          \"height\": \"350px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }), \"  \");\n    }))))) : 'We are loading news...';\n    return React.createElement(\"div\", {\n      className: \"center-module\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"news-module animated\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"top-img-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"top-img-link\",\n      href: \"javascript:;\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, imgBack, React.createElement(\"div\", {\n      className: \"text-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"javascript:;\",\n      className: \"text-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, \" \", this.state.headline_news.headline, \" \"), React.createElement(\"p\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, this.state.headline_news.description, \" \"), React.createElement(\"a\", {\n      href: \"javascript:;\",\n      className: \"a-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, this.state.headline_news.author, \" \"), React.createElement(\"div\", {\n      className: \"pinglun\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, \"8,170 people reacting\"))))), React.createElement(\"div\", {\n      className: \"bottom-img-block swiper-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"swiper-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, news_swiper))), React.createElement(\"ul\", {\n      className: \"news-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, newsList));\n  }\n\n}\n\nexport default CenterModule;","map":{"version":3,"sources":["C:/cs/pulmonic plus/english-news-website/src/components/home/content/centerModule.js"],"names":["React","Component","Router","Route","Link","browserHistory","Swiper","$","Carousel","CenterModule","constructor","state","news","headline_news","type","repoName","repoUrl","page","more_news","adv1","componentWillMount","myFetchOptions","method","console","log","fetch","then","res","json","data","list","setState","catch","error","isLoaded","componentDidMount","mySwiper","autoplay","loop","delay","speed","centeredSlides","spaceBetween","slidesOffsetBefore","slidesOffsetAfter","slidesPerView","observer","observeParents","el","onmouseover","start","onmouseout","stop","response","scrollFadeIn","num","topArr","find","each","push","offset","top","window","height","scroll","scrollTop","addClass","length","eq","componentWillReceiveProps","nextProps","id","props","categoryId","searchValue","componentDidUpdate","prevProps","prevState","render","settings","withoutControls","wrapAround","imgBack","document","body","clientWidth","imgUrl","bannerImage","showImage","backgroundImage","styeH3","width","whiteSpace","overflow","textOverflow","news_swiper","map","newsItem","index","headline","newsList","newsId","updatedDate","author","description"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Router, Route, Link, browserHistory } from 'react-router-dom';\r\nimport './centerModule.scss';\r\nimport Swiper from 'swiper/js/swiper.min.js';\r\nimport 'swiper/css/swiper.min.css';\r\nimport $ from 'jquery';\r\nimport \"animate.css\";\r\nimport Carousel from 'nuka-carousel';\r\n\r\nclass CenterModule extends Component {\r\n\r\n  constructor() {\r\n  super();\r\n  this.state = {\r\n    news: [],\r\n    headline_news:[],\r\n    type: '111',\r\n    repoName:'',\r\n    repoUrl:'',\r\n    page:1,\r\n    more_news:true,\r\n    adv1:[]\r\n\r\n  };\r\n}\r\n\r\ncomponentWillMount() {\r\n  var myFetchOptions = {\r\n      method: 'GET'\r\n    };\r\n    console.log('1111');\r\n    fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=94821302-a50b-48dc-9252-964b708d1d40\", myFetchOptions)\r\n .then(res => res.json())\r\n .then(data => {\r\n     console.log(data.list[0])\r\n     this.setState({\r\n       news: data.list,\r\n       headline_news: data.list[0]\r\n     });\r\n   })\r\n .catch(error => {\r\n   this.setState({\r\n     isLoaded: true,\r\n     error\r\n   });\r\n })\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n\r\n      let mySwiper = new Swiper('.bottom-img-block', {\r\n        autoplay: false,\r\n        loop: true,\r\n        delay: 100,\r\n        speed: 700,\r\n        centeredSlides: false,       //为true设置模块居中\r\n        spaceBetween : 20,          //slide之间的距离\r\n        slidesOffsetBefore: 50,     //设定slides与wrapper左边框的偏移量\r\n        slidesOffsetAfter: 50,      //设定slides与wrapper右边框的偏移量\r\n        slidesPerView : 'auto',\r\n        observer:true,//修改swiper自己或子元素时，自动初始化swiper\r\n   observeParents:true//修改swiper的父元素时，自动初始化swiper\r\n\r\n        // navigation: {\r\n        // \tnextEl: '.swiper-button-next',\r\n        // \tprevEl: '.swiper-button-prev',\r\n        // },\r\n      });\r\n      mySwiper.el.onmouseover = function(){\r\n        mySwiper.autoplay.start();\r\n      }\r\n      mySwiper.el.onmouseout = function(){\r\n        mySwiper.autoplay.stop();\r\n      }\r\n\r\n\r\n      // 广告\r\n      var myFetchOptions = {  //广告     0f484831-2031-450e-8173-3f470290f28a\r\nmethod: 'GET'\r\n};\r\n  fetch(\"http://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=f23cf76d-8c33-4c0a-9f0f-b1da8cd0e230\", myFetchOptions)\r\n  .then(response => response.json())\r\n  .then(json => this.setState({adv1: json.list}));\r\n\r\n\r\n\r\n\r\n\r\n\r\n      console.log(this.state.news);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    scrollFadeIn() {\r\n        let num = 0,\r\n            topArr = [];\r\n\r\n        $(\".center-module\").find(\".news-li-list\").each(function(){\r\n            topArr.push($(this).offset().top - $(window).height() + 25);\r\n        });\r\n        console.log(topArr)\r\n        $(window).scroll(res => {\r\n            if($(window).scrollTop() > 5){\r\n                $(\".center-module\").find(\".news-module\").addClass('fadeInUp');\r\n            }\r\n            if(num < topArr.length && $(window).scrollTop() > topArr[num]){\r\n                $(\".center-module\").find(\".news-li-list\").eq(num).addClass('fadeInUp');\r\n                num += 1;\r\n            }\r\n        })\r\n    }\r\n    // 在getDerivedStateFromProps中进行state的改变\r\n    // static getDerivedStateFromProps(nextProps, prevState) {\r\n    //     console.log(nextProps.categoryId);\r\n    //     console.log(prevState.categoryId);\r\n    //     return null;\r\n    // }\r\n    //\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n      // 先做categoeyid选择 在做搜索选择 重新渲染组件 获得需要的新闻列表\r\n    \r\n      console.log(nextProps.id);  console.log(this.props.id);\r\n\r\n\r\n      if (nextProps.categoryId != \"\") {\r\n        var myFetchOptions = {\r\n            method: 'GET'\r\n          };\r\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=\"+nextProps.categoryId, myFetchOptions)\r\n       .then(res => res.json())\r\n       .then(data => {\r\n           this.setState({\r\n             news: data.list,\r\n           });\r\n         })\r\n       .catch(error => {\r\n         this.setState({\r\n           isLoaded: true,\r\n           error\r\n         });\r\n       })\r\n\r\n       return false;\r\n      }\r\n\r\n\r\n\r\n\r\n      // 父组件把更新的search传进来了  如果为空字符 直接给他原始画面数据\r\n      if (nextProps.searchValue == \"\") {\r\n        var myFetchOptions = {\r\n            method: 'GET'\r\n          };\r\n\r\n          fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?page=1&category=94821302-a50b-48dc-9252-964b708d1d40\", myFetchOptions)\r\n       .then(res => res.json())\r\n       .then(data => {\r\n           this.setState({\r\n             news: data.list,\r\n           });\r\n         })\r\n       .catch(error => {\r\n         this.setState({\r\n           isLoaded: true,\r\n           error\r\n         });\r\n       })\r\n      }\r\n    // 父组件把更新的search传进来了\r\n    if (nextProps.searchValue != \"\") {\r\n      var myFetchOptions = {\r\n          method: 'GET'\r\n        };\r\n\r\n        fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news?searchText=\"+nextProps.searchValue, myFetchOptions)\r\n     .then(res => res.json())\r\n     .then(data => {\r\n         this.setState({\r\n           news: data.list,\r\n         });\r\n       })\r\n     .catch(error => {\r\n       this.setState({\r\n         isLoaded: true,\r\n         error\r\n       });\r\n     })\r\n    }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps,prevState){\r\n\r\n\r\n        this.scrollFadeIn();\r\n\r\n    }\r\n    render() {\r\n    //  console.log(this.props.searchValue);\r\n        console.log(this.props.categoryId);\r\n      const \tsettings = {\r\n  autoplay: true,\r\n  withoutControls: true,\r\n  wrapAround:true\r\n};\r\n      console.log(this.state.news)\r\n\r\n      \tconst {headline_news} = this.state;\r\n        let imgBack;\r\n        if(document.body.clientWidth > 0){\r\n            let imgUrl =  headline_news.bannerImage ;\r\n            // document.body.clientWidth > 1366 ？\r\n    //        let imgUrl = '/static/media/onePhoto.bb45fbbf.jpg';\r\n            const showImage = {\r\n                backgroundImage: 'url(' + imgUrl + ')'\r\n            }\r\n            imgBack = <div className=\"img-back\" style={showImage}></div>;\r\n        } else {\r\n            imgBack = '';\r\n        }\r\n\tconst {news} = this.state;\r\n  const styeH3 = {\r\n  width: \"170px\",\r\n  whiteSpace: \"nowrap\",\r\n  overflow: \"hidden\",\r\n  textOverflow: \"ellipsis\"\r\n};\r\nconst news_swiper = news.length\r\n    ? news.map((newsItem, index) => (\r\n      <div key={index} className=\"swiper-slide\">\r\n          <a href=\"javascript:;\">\r\n                <img src={newsItem.bannerImage}/>\r\n                <span className=\"text\" >{newsItem.headline}</span>\r\n\r\n          </a>\r\n      </div>\r\n\r\n\r\n    ))\r\n    : 'We are loading news...';\r\n\r\n  const newsList = news.length\r\n\t\t\t? news.map((newsItem, index) => (\r\n\r\n        <li key={index} className=\"news-li-list animated\">\r\n            <Link to={`details/${newsItem.newsId}`}  target=\"_blank\" className=\"a-link\">\r\n        <img className=\"img-show\" src={newsItem.bannerImage}/>\r\n                <div className=\"text-box\">\r\n                <div className=\"author\">\r\n                    <p >{newsItem.updatedDate}</p>\r\n                    <p >{newsItem.author}</p>\r\n               </div>\r\n                    <span className=\"title\">{newsItem.headline}</span>\r\n                     <p className=\"content\">{newsItem.description}</p>\r\n                </div>\r\n            </Link>\r\n              <div className=\"big-imgShow\"  style={{\"display\":  (index+1)%5==0? 'block':'none'}}>\r\n                   {\r\n                     <Carousel {...settings}>\r\n                          {\r\n                            this.state.adv1.map((newsItem,index)=>{\r\n                              return (\r\n                                <div>   <img src={newsItem.bannerImage} style={{\"height\":  \"350px\"}}/>  </div>\r\n\r\n                              )\r\n                            })\r\n                          }\r\n                    </Carousel>\r\n             }\r\n                    </div>\r\n\r\n\r\n   </li>\r\n\r\n\t\t\t))\r\n\t\t\t:  'We are loading news...';\r\n\r\n\r\n\r\n\r\n\r\n        return (\r\n            <div className=\"center-module\">\r\n\r\n                <div className=\"news-module animated\">\r\n                    <div className=\"top-img-block\">\r\n                        <a className=\"top-img-link\" href=\"javascript:;\">\r\n                            {imgBack}\r\n                            <div className=\"text-block\">\r\n                                <a href=\"javascript:;\" className=\"text-title\"> {this.state.headline_news.headline} </a>\r\n                                <p className=\"text\">{this.state.headline_news.description} </p>\r\n                              <a href=\"javascript:;\" className=\"a-link\">{this.state.headline_news.author} </a>\r\n                                <div className=\"pinglun\">\r\n                                    <span className=\"img\"></span>\r\n                                    <span>8,170 people reacting</span>\r\n                                </div>\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                    <div className=\"bottom-img-block swiper-container\">\r\n                        <div className=\"swiper-wrapper\">\r\n                            {news_swiper}\r\n                          {/*  <div className=\"swiper-slide\">\r\n                                <a href=\"javascript:;\">\r\n                                    <img src={require('../../../assets/images/one.jpg')}/>\r\n                                    <span className=\"text\">Tennis player defends asking ball girl to peel banana</span>\r\n                                </a>\r\n                            </div>\r\n                            <div className=\"swiper-slide\">\r\n                                <a href=\"javascript:;\">\r\n                                    <img src={require('../../../assets/images/one.jpg')}/>\r\n                                    <span className=\"text\">Tennis player defends asking ball girl to peel banana</span>\r\n                                </a>\r\n                            </div>\r\n                            <div className=\"swiper-slide\">\r\n                                <a href=\"javascript:;\">\r\n                                    <img src={require('../../../assets/images/one.jpg')}/>\r\n                                    <span className=\"text\">Tennis player defends asking ball girl to peel banana</span>\r\n                                </a>\r\n                            </div>\r\n                            <div className=\"swiper-slide\">\r\n                                <a href=\"javascript:;\">\r\n                                    <img src={require('../../../assets/images/one.jpg')}/>\r\n                                    <span className=\"text\">Tennis player defends asking ball girl to peel banana</span>\r\n                                </a>\r\n                            </div>\r\n                            <div className=\"swiper-slide\">\r\n                                <a href=\"javascript:;\">\r\n                                    <img src={require('../../../assets/images/one.jpg')}/>\r\n                                    <span className=\"text\">Tennis player defends asking ball girl to peel banana</span>\r\n                                </a>\r\n                            </div>  */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ul className=\"news-list\">\r\n\r\n                    {newsList}\r\n\r\n\r\n                </ul>\r\n            </div>\r\n        )\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport default CenterModule\r\n"]},"metadata":{},"sourceType":"module"}