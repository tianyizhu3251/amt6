{"ast":null,"code":"var _jsxFileName = \"C:\\\\cs\\\\pulmonic plus\\\\english-news-website\\\\src\\\\components\\\\home\\\\content\\\\pollingDetail.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport \"animate.css\";\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { Card } from 'antd';\nimport ReactDOM from 'react-dom';\nimport { Radio, Input } from 'antd';\nimport { Button, message } from 'antd';\nimport './pollingDetail.scss';\n\nclass PollingDetail extends Component {\n  constructor() {\n    super();\n    this.state = {\n      value: 3,\n      question1: \"Which team do you support most?\",\n      hasLogined: false,\n      button_name: 'submit',\n      hasSubmitted: false,\n      res1: '',\n      res2: '',\n      res3: '',\n      res4: '',\n      res_sentence: '',\n      resr: 60\n    };\n  }\n\n  componentWillMount() {\n    console.log(this.state.hasSubmitted);\n\n    if (localStorage.userid != 'undefined' & localStorage.userid != '') {\n      this.setState({\n        hasLogined: true\n      }); // this.setState({usertocken:localStorage.usertocken,userid:localStorage.userid,userNickName:localStorage.userNickName});\n    }\n\n    if (this.statehasSubmitted == true) {\n      console.log('polling');\n      this.setState({\n        button_name: 'See results'\n      });\n    }\n  }\n\n  onChange(e) {\n    console.log('radio checked', e.target.value);\n    this.setState({\n      value: e.target.value\n    });\n  }\n\n  onChange2(a, b, c) {\n    console.log(a, b, c);\n  }\n\n  toPercent(point) {\n    var str = Number(point * 100).toFixed(1);\n    str += \"%\";\n    return str;\n  }\n\n  submit(value) {\n    console.log(this.localStorage);\n\n    if (this.state.hasSubmitted == true) {\n      console.log(\"already submit !!!! \"); // 直接拿答题人数结果\n\n      var myFetchOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.usertocken\n        }\n      };\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/polls/\" + this.props.questionid, myFetchOptions).then(response => response.json()).then(json => {\n        console.log(json);\n        console.log(json[0].pollCount);\n        var tmptotal = json[0].pollCount + json[1].pollCount + json[2].pollCount + json[3].pollCount;\n        console.log(tmptotal); // z这里计算百分比显示\n\n        this.setState({\n          res1: json[0].pollCount / tmptotal,\n          res2: json[1].pollCount / tmptotal,\n          res3: json[2].pollCount / tmptotal,\n          res4: json[3].pollCount / tmptotal,\n          res_sentence: 'people agree!'\n        }); //    this.setState({polling: tmp_list})  // videoarry 后面取值便利渲染\n      });\n    } else {\n      console.log(this.state.value);\n      console.log(this.props.questionid); // 下面开始提交答案\n\n      var myFetchOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + localStorage.usertocken\n        }\n      };\n      fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/polls/\" + this.props.questionid + \"/poll/\" + this.state.value, myFetchOptions).then(response => {\n        console.log(response);\n        console.log(response.status);\n\n        if (response.status == \"201\") {\n          message.success(\"Polling Submit success!\");\n        } else if (response.status == \"409\" || response.status == '404') {\n          message.success(\"You have already submitted your answer!\");\n          this.setState({\n            hasSubmitted: true\n          });\n          this.setState({\n            button_name: 'Click me to see result'\n          });\n        } else {\n          message.success(\" You have to login to submit this only one time!\"); //\tthis.setModalVisible(true);\n          //\t\treturn 0;\n        } //\t\t  return response.json();\n        //\t\tconsole.log(response);\n\n      }); //  .then(json => {\n      //    console.log(json);\n      //this.setState({polling: tmp_list})  // videoarry 后面取值便利渲染\n      //    });\n      //  // 09f38fd0817948539d840bd426f92294\n    }\n  }\n\n  render() {\n    //  console.log(\"111111111111111\");\n    // console.log(this.state.value);\n    //  console.log('111');\n    //  console.log(this.props.question);\n    const radioStyle = {\n      display: 'block',\n      height: '30px',\n      lineHeight: '30px',\n      marginLeft: '60px'\n    };\n    const hidden = {\n      visible: 'hidden'\n    };\n    const value = 0.23;\n    const percentage = 23;\n    const newsList1 = React.createElement(Card, {\n      title: this.props.title,\n      extra: React.createElement(Button, {\n        onClick: this.submit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.button_name),\n      style: {\n        width: \"100%\",\n        background: \"#e9edf5\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        marginLeft: \"60px\",\n        fontSize: \"20\",\n        fontWeight: \"bold\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.props.question), React.createElement(Radio.Group, {\n      onChange: this.onChange.bind(this),\n      value: this.state.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Radio, {\n      style: radioStyle,\n      value: this.props.ans1id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, this.props.ans1, React.createElement(\"span\", {\n      style: {\n        color: \"#e9edf5\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \" \"), React.createElement(CircularProgressbar, {\n      value: this.state.res1,\n      maxValue: 1,\n      text: `${this.state.res1 * 100}%-A`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(CircularProgressbar, {\n      value: this.state.res2,\n      maxValue: 1,\n      text: `${this.state.res2 * 100}%-B`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })), React.createElement(Radio, {\n      style: radioStyle,\n      value: this.state.res3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, this.props.ans2, \" \"), React.createElement(Radio, {\n      style: radioStyle,\n      value: this.props.ans3id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, this.props.ans3, \"    \", React.createElement(\"span\", {\n      style: {\n        color: \"#e9edf5\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \" \"), React.createElement(CircularProgressbar, {\n      style: {\n        float: 'right',\n        marginTop: \"20px\",\n        marginLeft: \"20px\"\n      },\n      value: this.state.res3,\n      maxValue: 1,\n      text: `${this.state.res3 * 100}%-C`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(CircularProgressbar, {\n      style: {\n        float: 'right',\n        marginTop: \"20px\"\n      },\n      value: this.state.res4,\n      maxValue: 1,\n      text: `${this.state.res4 * 100}%-D`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(Radio, {\n      style: radioStyle,\n      value: this.props.ans4id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.props.ans4)), React.createElement(\"div\", {\n      style: {\n        margin: '0 auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(CircularProgressbar, {\n      value: this.state.res1,\n      maxValue: 1,\n      text: `${this.state.res1 * 100}%-A`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(CircularProgressbar, {\n      value: this.state.res2,\n      maxValue: 1,\n      text: `${this.state.res2 * 100}%-B`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        margin: '0 auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(CircularProgressbar, {\n      style: {},\n      value: this.state.res3,\n      maxValue: 1,\n      text: `${this.state.res3 * 100}%-C`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(CircularProgressbar, {\n      style: {},\n      value: this.state.res4,\n      maxValue: 1,\n      text: `${this.state.res4 * 100}%-D`,\n      strokeWidth: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, newsList1);\n  }\n\n}\n\nexport default PollingDetail;","map":{"version":3,"sources":["C:/cs/pulmonic plus/english-news-website/src/components/home/content/pollingDetail.js"],"names":["React","Component","$","CircularProgressbar","buildStyles","Card","ReactDOM","Radio","Input","Button","message","PollingDetail","constructor","state","value","question1","hasLogined","button_name","hasSubmitted","res1","res2","res3","res4","res_sentence","resr","componentWillMount","console","log","localStorage","userid","setState","statehasSubmitted","onChange","e","target","onChange2","a","b","c","toPercent","point","str","Number","toFixed","submit","myFetchOptions","method","headers","usertocken","fetch","props","questionid","then","response","json","pollCount","tmptotal","status","success","render","radioStyle","display","height","lineHeight","marginLeft","hidden","visible","percentage","newsList1","title","bind","width","background","fontSize","fontWeight","question","ans1id","ans1","color","ans2","ans3id","ans3","float","marginTop","ans4id","ans4","margin"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAO,aAAP;AACA,SAASC,mBAAT,EAA8BC,WAA9B,QAAiD,4BAAjD;AACA,OAAO,4CAAP;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,MAA7B;AACA,SAASC,MAAT,EAAkBC,OAAlB,QAAgC,MAAhC;AACA,OAAO,sBAAP;;AACA,MAAMC,aAAN,SAA4BV,SAA5B,CAAsC;AACpCW,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,CADI;AAEXC,MAAAA,SAAS,EAAE,iCAFA;AAGXC,MAAAA,UAAU,EAAE,KAHD;AAIXC,MAAAA,WAAW,EAAE,QAJF;AAKXC,MAAAA,YAAY,EAAE,KALH;AAMXC,MAAAA,IAAI,EAAC,EANM;AAOXC,MAAAA,IAAI,EAAC,EAPM;AAQXC,MAAAA,IAAI,EAAC,EARM;AASXC,MAAAA,IAAI,EAAC,EATM;AAUXC,MAAAA,YAAY,EAAC,EAVF;AAWXC,MAAAA,IAAI,EAAE;AAXK,KAAb;AAcD;;AACDC,EAAAA,kBAAkB,GAAE;AAEZC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAL,CAAWK,YAAvB;;AACN,QAAIU,YAAY,CAACC,MAAb,IAAqB,WAArB,GAAmCD,YAAY,CAACC,MAAb,IAAqB,EAA5D,EAAgE;AAC9D,WAAKC,QAAL,CAAc;AAACd,QAAAA,UAAU,EAAC;AAAZ,OAAd,EAD8D,CAE9D;AACD;;AACD,QAAI,KAAKe,iBAAL,IAAwB,IAA5B,EAAkC;AAChCL,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,WAAKG,QAAL,CAAc;AAACb,QAAAA,WAAW,EAAC;AAAb,OAAd;AAGD;AAKF;;AAGAe,EAAAA,QAAQ,CAACC,CAAD,EAAG;AACTP,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BM,CAAC,CAACC,MAAF,CAASpB,KAAtC;AACA,SAAKgB,QAAL,CAAc;AACZhB,MAAAA,KAAK,EAAEmB,CAAC,CAACC,MAAF,CAASpB;AADJ,KAAd;AAKD;;AAGDqB,EAAAA,SAAS,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAU;AACjBZ,IAAAA,OAAO,CAACC,GAAR,CAAYS,CAAZ,EAAeC,CAAf,EAAkBC,CAAlB;AACF;;AACDC,EAAAA,SAAS,CAACC,KAAD,EAAO;AAChB,QAAIC,GAAG,GAACC,MAAM,CAACF,KAAK,GAAC,GAAP,CAAN,CAAkBG,OAAlB,CAA0B,CAA1B,CAAR;AACAF,IAAAA,GAAG,IAAE,GAAL;AACA,WAAOA,GAAP;AACD;;AAECG,EAAAA,MAAM,CAAC9B,KAAD,EAAO;AACXY,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,YAAjB;;AAGA,QAAI,KAAKf,KAAL,CAAWK,YAAX,IAAyB,IAA7B,EAAmC;AACjCQ,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EADiC,CAE/B;;AAEA,UAAIkB,cAAc,GAAG;AACnBC,QAAAA,MAAM,EAAE,KADW;AAEnBC,QAAAA,OAAO,EAAC;AACJ,2BAAiB,YAAWnB,YAAY,CAACoB;AADrC;AAFW,OAArB;AAMAC,MAAAA,KAAK,CAAC,+DAA6D,KAAKC,KAAL,CAAWC,UAAzE,EAAqFN,cAArF,CAAL,CACCO,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEME,IAAI,IAAI;AACZ5B,QAAAA,OAAO,CAACC,GAAR,CAAY2B,IAAZ;AACA5B,QAAAA,OAAO,CAACC,GAAR,CAAY2B,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAApB;AACA,YAAIC,QAAQ,GAACF,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAAR,GAAkBD,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAA1B,GAAoCD,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAA5C,GAAsDD,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAA3E;AACA7B,QAAAA,OAAO,CAACC,GAAR,CAAY6B,QAAZ,EAJY,CAIY;;AACxB,aAAK1B,QAAL,CAAc;AAACX,UAAAA,IAAI,EAAEmC,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAAR,GAAkBC,QAAzB;AAAmCpC,UAAAA,IAAI,EAAEkC,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAAR,GAAkBC,QAA3D;AAAqEnC,UAAAA,IAAI,EAACiC,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAAR,GAAkBC,QAA5F;AAAsGlC,UAAAA,IAAI,EAACgC,IAAI,CAAC,CAAD,CAAJ,CAAQC,SAAR,GAAkBC,QAA7H;AAAsIjC,UAAAA,YAAY,EAAC;AAAnJ,SAAd,EALY,CAMlB;AACK,OATD;AAWH,KArBD,MAsBK;AAILG,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAL,CAAWC,KAAvB;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKuB,KAAL,CAAWC,UAAvB,EALK,CAML;;AACI,UAAIN,cAAc,GAAG;AACnBC,QAAAA,MAAM,EAAE,MADW;AAEnBC,QAAAA,OAAO,EAAC;AACN,0BAAe,kBADT;AAEN,2BAAiB,YAAWnB,YAAY,CAACoB;AAFnC;AAFW,OAArB;AAQAC,MAAAA,KAAK,CAAC,+DAA6D,KAAKC,KAAL,CAAWC,UAAxE,GAAmF,QAAnF,GAA4F,KAAKtC,KAAL,CAAWC,KAAxG,EAA+G+B,cAA/G,CAAL,CACCO,IADD,CACMC,QAAQ,IAAI;AACd3B,QAAAA,OAAO,CAACC,GAAR,CAAa0B,QAAb;AACA3B,QAAAA,OAAO,CAACC,GAAR,CAAa0B,QAAQ,CAACI,MAAtB;;AACA,YAAIJ,QAAQ,CAACI,MAAT,IAAiB,KAArB,EAA4B;AAC1B/C,UAAAA,OAAO,CAACgD,OAAR,CAAgB,yBAAhB;AACD,SAFD,MAGK,IAAIL,QAAQ,CAACI,MAAT,IAAiB,KAAjB,IAA0BJ,QAAQ,CAACI,MAAT,IAAiB,KAA/C,EAAqD;AACxD/C,UAAAA,OAAO,CAACgD,OAAR,CAAgB,yCAAhB;AACA,eAAK5B,QAAL,CAAc;AAACZ,YAAAA,YAAY,EAAC;AAAd,WAAd;AACA,eAAKY,QAAL,CAAc;AAACb,YAAAA,WAAW,EAAC;AAAb,WAAd;AACD,SAJI,MAKA;AACHP,UAAAA,OAAO,CAACgD,OAAR,CAAgB,kDAAhB,EADG,CAEL;AACF;AACG,SAfa,CAgBpB;AACE;;AAEC,OApBD,EAfC,CAsCH;AACA;AAIE;AACJ;AACA;AAGD;AAAG;;AAKNC,EAAAA,MAAM,GAAG;AAEL;AACA;AAEJ;AACA;AAEI,UAAMC,UAAU,GAAG;AACnBC,MAAAA,OAAO,EAAE,OADU;AAEnBC,MAAAA,MAAM,EAAE,MAFW;AAGnBC,MAAAA,UAAU,EAAE,MAHO;AAInBC,MAAAA,UAAU,EAAE;AAJO,KAAnB;AAOA,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AADI,KAAf;AAGA,UAAMpD,KAAK,GAAG,IAAd;AACA,UAAMqD,UAAU,GAAG,EAAnB;AAEA,UAAMC,SAAS,GACX,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE,KAAKlB,KAAL,CAAWmB,KAAxB;AAA+B,MAAA,KAAK,EAAG,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKzB,MAAL,CAAY0B,IAAZ,CAAiB,IAAjB,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0C,KAAKzD,KAAL,CAAWI,WAArD,CAAvC;AAAoH,MAAA,KAAK,EAAE;AAAEsD,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,UAAU,EAAE;AAA7B,OAA3H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA;AAAG,MAAA,KAAK,EAAE;AAACR,QAAAA,UAAU,EAAE,MAAb;AAAoBS,QAAAA,QAAQ,EAAC,IAA7B;AAAkCC,QAAAA,UAAU,EAAC;AAA7C,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiE,KAAKxB,KAAL,CAAWyB,QAA5E,CAFA,EAIA,oBAAC,KAAD,CAAO,KAAP;AAAa,MAAA,QAAQ,EAAE,KAAK3C,QAAL,CAAcsC,IAAd,CAAmB,IAAnB,CAAvB;AAAiD,MAAA,KAAK,EAAE,KAAKzD,KAAL,CAAWC,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE8C,UAAd;AAA0B,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAW0B,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK1B,KAAL,CAAW2B,IADd,EAEA;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,KAAK,EAAC;AAAP,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFA,EAGA,oBAAC,mBAAD;AACA,MAAA,KAAK,EAAE,KAAKjE,KAAL,CAAWM,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKN,KAAL,CAAWM,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,EAKA,oBAAC,mBAAD;AACA,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWO,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKP,KAAL,CAAWO,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALA,CAFF,EAYE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEwC,UAAd;AAA0B,MAAA,KAAK,EAAE,KAAK/C,KAAL,CAAWQ,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK6B,KAAL,CAAW6B,IADd,MAZF,EAgBE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEnB,UAAd;AAA0B,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAW8B,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK9B,KAAL,CAAW+B,IADd,UACuB;AAAM,MAAA,KAAK,EAAE;AAACH,QAAAA,KAAK,EAAC;AAAP,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADvB,EAEE,oBAAC,mBAAD;AAAqB,MAAA,KAAK,EAAE;AAAGI,QAAAA,KAAK,EAAC,OAAT;AAAkBC,QAAAA,SAAS,EAAE,MAA7B;AAAsCnB,QAAAA,UAAU,EAAC;AAAjD,OAA5B;AACA,MAAA,KAAK,EAAE,KAAKnD,KAAL,CAAWQ,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKR,KAAL,CAAWQ,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAIE,oBAAC,mBAAD;AAAqB,MAAA,KAAK,EAAE;AAAG6D,QAAAA,KAAK,EAAC,OAAT;AAAkBC,QAAAA,SAAS,EAAE;AAA7B,OAA5B;AACA,MAAA,KAAK,EAAE,KAAKtE,KAAL,CAAWS,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKT,KAAL,CAAWS,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAhBF,EAuBE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEsC,UAAd;AAA0B,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAWkC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKlC,KAAL,CAAWmC,IADd,CAvBF,CAJA,EA+BA;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ,oBAAC,mBAAD;AACA,MAAA,KAAK,EAAE,KAAKzE,KAAL,CAAWM,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKN,KAAL,CAAWM,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAGQ,oBAAC,mBAAD;AACA,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWO,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKP,KAAL,CAAWO,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHR,CA/BA,EAqCE;AAAK,MAAA,KAAK,EAAE;AAACkE,QAAAA,MAAM,EAAE;AAAT,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,oBAAC,mBAAD;AAAqB,MAAA,KAAK,EAAE,EAA5B;AACA,MAAA,KAAK,EAAE,KAAKzE,KAAL,CAAWQ,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKR,KAAL,CAAWQ,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADN,EAGM,oBAAC,mBAAD;AAAqB,MAAA,KAAK,EAAE,EAA5B;AACA,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWS,IADlB;AACwB,MAAA,QAAQ,EAAE,CADlC;AACqC,MAAA,IAAI,EAAG,GAAE,KAAKT,KAAL,CAAWS,IAAX,GAAkB,GAAI,KADpE;AAC0E,MAAA,WAAW,EAAE,CADvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHN,CArCF,CADJ;AA+CF,WACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEC8C,SAFD,CADE;AAaD;;AAzNqC;;AA4NtC,eAAezD,aAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport \"animate.css\";\r\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport { Card } from 'antd';\r\nimport ReactDOM from 'react-dom';\r\nimport { Radio, Input } from 'antd';\r\nimport { Button ,\tmessage} from 'antd';\r\nimport './pollingDetail.scss';\r\nclass PollingDetail extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      value: 3,\r\n      question1: \"Which team do you support most?\",\r\n      hasLogined: false,\r\n      button_name: 'submit',\r\n      hasSubmitted: false,\r\n      res1:'',\r\n      res2:'',\r\n      res3:'',\r\n      res4:'',\r\n      res_sentence:'',\r\n      resr: 60\r\n\r\n    };\r\n  };\r\n  componentWillMount(){\r\n\r\n          console.log(this.state.hasSubmitted);\r\n    if (localStorage.userid!='undefined' & localStorage.userid!='') {\r\n      this.setState({hasLogined:true});\r\n      // this.setState({usertocken:localStorage.usertocken,userid:localStorage.userid,userNickName:localStorage.userNickName});\r\n    }\r\n    if (this.statehasSubmitted==true) {\r\n      console.log('polling')\r\n      this.setState({button_name:'See results'})\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n  };\r\n\r\n\r\n   onChange(e){\r\n     console.log('radio checked', e.target.value);\r\n     this.setState({\r\n       value: e.target.value,\r\n\r\n     });\r\n\r\n   };\r\n\r\n\r\n   onChange2(a, b, c) {\r\n     console.log(a, b, c);\r\n  }\r\n  toPercent(point){\r\n  var str=Number(point*100).toFixed(1);\r\n  str+=\"%\";\r\n  return str;\r\n};\r\n\r\n  submit(value){\r\n    console.log(this.localStorage);\r\n\r\n\r\n    if (this.state.hasSubmitted==true) {\r\n      console.log(\"already submit !!!! \")\r\n        // 直接拿答题人数结果\r\n\r\n        var myFetchOptions = {\r\n          method: 'GET',\r\n          headers:{\r\n              'Authorization': 'Bearer '+ localStorage.usertocken\r\n          }\r\n        };\r\n        fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/polls/\"+this.props.questionid, myFetchOptions)\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          console.log(json);\r\n          console.log(json[0].pollCount);\r\n          var tmptotal=json[0].pollCount+json[1].pollCount+json[2].pollCount+json[3].pollCount\r\n          console.log(tmptotal);  // z这里计算百分比显示\r\n          this.setState({res1: json[0].pollCount/tmptotal, res2: json[1].pollCount/tmptotal, res3:json[2].pollCount/tmptotal, res4:json[3].pollCount/tmptotal,res_sentence:'people agree!' });\r\n    //    this.setState({polling: tmp_list})  // videoarry 后面取值便利渲染\r\n        });\r\n\r\n    }\r\n    else {\r\n\r\n\r\n\r\n    console.log(this.state.value);\r\n    console.log(this.props.questionid);\r\n    // 下面开始提交答案\r\n        var myFetchOptions = {\r\n          method: 'POST',\r\n          headers:{\r\n            'Content-Type':'application/json',\r\n            'Authorization': 'Bearer '+ localStorage.usertocken\r\n          }\r\n        };\r\n\r\n        fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/polls/\"+this.props.questionid+\"/poll/\"+this.state.value, myFetchOptions)\r\n        .then(response => {\r\n            console.log((response));\r\n            console.log((response.status));\r\n            if (response.status==\"201\") {\r\n              message.success(\"Polling Submit success!\");\r\n            }\r\n            else if (response.status==\"409\" || response.status=='404'){\r\n              message.success(\"You have already submitted your answer!\");\r\n              this.setState({hasSubmitted:true});\r\n              this.setState({button_name:'Click me to see result'});\r\n            }\r\n            else {\r\n              message.success(\" You have to login to submit this only one time!\");\r\n            //\tthis.setModalVisible(true);\r\n          //\t\treturn 0;\r\n            }\r\n      //\t\t  return response.json();\r\n        //\t\tconsole.log(response);\r\n\r\n        })\r\n\r\n\r\n      //  .then(json => {\r\n      //    console.log(json);\r\n\r\n\r\n\r\n        //this.setState({polling: tmp_list})  // videoarry 后面取值便利渲染\r\n    //    });\r\n    //  // 09f38fd0817948539d840bd426f92294\r\n\r\n\r\n  }  };\r\n\r\n\r\n\r\n\r\nrender() {\r\n\r\n    //  console.log(\"111111111111111\");\r\n    // console.log(this.state.value);\r\n\r\n//  console.log('111');\r\n//  console.log(this.props.question);\r\n\r\n    const radioStyle = {\r\n    display: 'block',\r\n    height: '30px',\r\n    lineHeight: '30px',\r\n    marginLeft: '60px',\r\n   }\r\n\r\n    const hidden = {\r\n      visible: 'hidden'\r\n    }\r\n    const value = 0.23;\r\n    const percentage = 23\r\n\r\n    const newsList1 =\r\n        <Card title={this.props.title} extra={ <Button onClick={this.submit.bind(this)}>{this.state.button_name}</Button> } style={{ width: \"100%\", background: \"#e9edf5\"  }}>\r\n\r\n        <p style={{marginLeft: \"60px\",fontSize:\"20\",fontWeight:\"bold\"}}>{this.props.question}</p>\r\n\r\n        <Radio.Group onChange={this.onChange.bind(this)} value={this.state.value}>\r\n\r\n          <Radio style={radioStyle} value={this.props.ans1id} >\r\n            {this.props.ans1}\r\n          <span style={{color:\"#e9edf5\"}}> </span>\r\n          <CircularProgressbar\r\n          value={this.state.res1} maxValue={1} text={`${this.state.res1 * 100}%-A`} strokeWidth={8}  />\r\n          <CircularProgressbar\r\n          value={this.state.res2} maxValue={1} text={`${this.state.res2 * 100}%-B`} strokeWidth={8}  />\r\n\r\n\r\n          </Radio>\r\n          <Radio style={radioStyle} value={this.state.res3}>\r\n            {this.props.ans2} {/*   <span style={{color:'#69809B', fontSize: '14px', fontweight:'bold', marginLeft:'60px'}}>    {this.state.res2}  {this.state.res_sentence} </span>  */}\r\n\r\n          </Radio>\r\n          <Radio style={radioStyle} value={this.props.ans3id}>\r\n            {this.props.ans3}    <span style={{color:\"#e9edf5\"}}> </span>\r\n            <CircularProgressbar style={{  float:'right', marginTop: \"20px\" , marginLeft:\"20px\"}}\r\n            value={this.state.res3} maxValue={1} text={`${this.state.res3 * 100}%-C`} strokeWidth={8}  />\r\n            <CircularProgressbar style={{  float:'right', marginTop: \"20px\"}}\r\n            value={this.state.res4} maxValue={1} text={`${this.state.res4 * 100}%-D`} strokeWidth={8}  />\r\n          </Radio>\r\n          <Radio style={radioStyle} value={this.props.ans4id}>\r\n            {this.props.ans4}\r\n          </Radio>\r\n        </Radio.Group>\r\n        <div style={{margin: '0 auto'}}>\r\n                <CircularProgressbar\r\n                value={this.state.res1} maxValue={1} text={`${this.state.res1 * 100}%-A`} strokeWidth={8}  />\r\n                <CircularProgressbar\r\n                value={this.state.res2} maxValue={1} text={`${this.state.res2 * 100}%-B`} strokeWidth={8}  />\r\n        </div>\r\n          <div style={{margin: '0 auto'}}>\r\n                <CircularProgressbar style={{  }}\r\n                value={this.state.res3} maxValue={1} text={`${this.state.res3 * 100}%-C`} strokeWidth={8}  />\r\n                <CircularProgressbar style={{  }}\r\n                value={this.state.res4} maxValue={1} text={`${this.state.res4 * 100}%-D`} strokeWidth={8}  />\r\n       </div>\r\n\r\n        </Card>\r\n\r\n  return (\r\n<div >\r\n\r\n{newsList1}\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n  );\r\n}\r\n}\r\n\r\nexport default PollingDetail\r\n"]},"metadata":{},"sourceType":"module"}