{"ast":null,"code":"var _jsxFileName = \"C:\\\\cs\\\\pulmonic plus\\\\english-news-website\\\\src\\\\components\\\\home\\\\content\\\\weatherModule\\\\pcWeather.js\";\nimport React from 'react';\nimport { Card } from 'antd';\nimport { Tabs } from 'antd';\nimport { Router, Route, Link, browserHistory } from 'react-router';\nimport WeatherTitles from \"./weather_titles\";\nimport WeatherForm from \"./weather_form\";\nimport WeatherResult from \"./weather_result\"; //import WeatherDemo from './weather_demo';\n\nexport default class PCWeather extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      news: '',\n      latitude: '',\n      longitude: '',\n      type: '',\n      adv: 6,\n      city: undefined,\n      temperature: undefined,\n      data: undefined,\n      humidity: undefined,\n      weather: undefined,\n      error: undefined,\n      country: undefined,\n      user_city: '',\n      user_country: 'America',\n      user_address: '',\n      img: 'cloudy.png'\n    };\n  }\n\n  getType(key) {\n    console.log(\"eee\");\n    console.log(\"father\" + key);\n    var tmp_img = ''; // 这里已经拿到子组件给的地址参数在key 现在就是把key中的dallas提取出来 然后给api读取气候\n\n    var arr = key.split(\", \");\n    var reg = /[\\u4e00-\\u9fa5]/g;\n    console.log(key.replace(reg, \"\"));\n    key = key.replace(reg, \"\");\n    this.setState({\n      user_city: arr[1],\n      user_address: key\n    } // arr[1]保存了字符串地址解析出来以后剩下的dallas\n    );\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    fetch(\"http://api.openweathermap.org/data/2.5/weather?q=\" + arr[1] + \",\" + this.state.user_country + \"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json()).then(json => {\n      var tmp_temp = parseInt(json.main.temp * 1.8 + 32);\n      this.setState({\n        news: json.weather[0],\n        temperature: tmp_temp,\n        city: json.name,\n        humidity: json.main.humidity,\n        country: json.sys.country,\n        error: \"\"\n      });\n      tmp_img = json.weather[0].description;\n      console.log(tmp_img.indexOf(\"haze\") != -1);\n\n      if (tmp_img.indexOf(\"cloud\") != -1) {\n        this.setState({\n          img: 'cloudy.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"haze\") != -1) {\n        this.setState({\n          img: 'haze.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"sunny\") != -1) {\n        this.setState({\n          img: 'sunny.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"rain\") != -1) {\n        this.setState({\n          img: 'raining.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"snow\") != -1) {\n        this.setState({\n          img: 'snowing.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"storm\") != -1) {\n        this.setState({\n          img: 'storm.png'\n        });\n        return true;\n      }\n\n      this.setState({\n        img: 'sky.png'\n      });\n    });\n  }\n\n  componentWillMount() {\n    var tmp_img = '';\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    fetch(\"http://api.openweathermap.org/data/2.5/weather?q=dallas,america&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json()).then(json => {\n      var tmp_temp = parseInt(json.main.temp * 1.8 + 32);\n      this.setState({\n        news: json.weather[0],\n        temperature: tmp_temp,\n        city: json.name,\n        humidity: json.main.humidity,\n        country: json.sys.country,\n        error: \"\"\n      });\n      console.log(json.weather[0].description);\n      tmp_img = json.weather[0].description;\n      console.log(tmp_img.indexOf(\"haze\") != -1);\n\n      if (tmp_img.indexOf(\"cloud\") != -1) {\n        this.setState({\n          img: 'cloudy.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"haze\") != -1) {\n        this.setState({\n          img: 'haze.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"sunny\") != -1) {\n        this.setState({\n          img: 'sunny.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"rain\") != -1) {\n        this.setState({\n          img: 'raining.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"snow\") != -1) {\n        this.setState({\n          img: 'snowing.png'\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"storm\") != -1) {\n        this.setState({\n          img: 'storm.png'\n        });\n        return true;\n      }\n\n      this.setState({\n        img: 'sky.png'\n      });\n    });\n  }\n\n  render() {\n    var settings2 = {\n      dots: false,\n      infinite: true,\n      autoplayInterval: 6000,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      autoplay: true\n    };\n    console.log(this.state.img);\n    return React.createElement(\"div\", {\n      class: \"topNewsList\",\n      style: {\n        marginBottom: \"33px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xs-7 form-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      placeholder: \"City...\",\n      value: this.state.user_city,\n      onChange: this.handleInputChange1.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"country\",\n      placeholder: \"Country...\",\n      value: this.state.user_country,\n      onChange: this.handleInputChange2.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"weather__info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, this.state.city && this.state.country && React.createElement(\"p\", {\n      className: \"weather__key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"weather__value\",\n      style: {\n        marginLeft: \"0px\",\n        marginTop: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \" \", this.state.city, \", \", this.state.country), React.createElement(\"span\", {\n      className: \"weather__value\",\n      style: {\n        marginLeft: \"100px\",\n        marginTop: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"\\u2191\"), \" \", React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", this.state.temperature + 8, \",\"), \"  \", React.createElement(\"span\", {\n      style: {\n        color: \"grey\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"\\u2193\"), \"   \", React.createElement(\"span\", {\n      style: {\n        color: \"grey\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", this.state.temperature - 15))), this.state.humidity && React.createElement(\"p\", {\n      className: \"weather__key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('../../../../assets/images/droplet.png'),\n      alt: \"logo\",\n      style: {\n        marginLeft: \"-10px\",\n        marginTop: \"5px\",\n        width: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), \"\\uFF1A\", React.createElement(\"span\", {\n      className: \"weather__value\",\n      style: {\n        marginLeft: \"-10px\",\n        marginTop: \"-30px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \" \", this.state.humidity, \" \"), React.createElement(\"span\", {\n      className: \"weather__value\",\n      style: {\n        color: \"green\",\n        marginLeft: \"110px\",\n        marginTop: \"-20px\",\n        fontSize: \"60px\",\n        fontweight: \"800\",\n        float: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \" \", this.state.temperature, \"\\u2109\"), React.createElement(\"img\", {\n      src: require('../../../../assets/images/' + this.state.img),\n      alt: \"logo\",\n      style: {\n        marginLeft: \"87px\",\n        marginTop: \"-90px\",\n        width: \"30%\",\n        float: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    })), this.state.description && React.createElement(\"p\", {\n      className: \"weather__key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"\",\n      style: {\n        color: \"blue\",\n        marginLeft: \"20px\",\n        marginTop: \"0px\",\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \" \", this.state.description, \" \")), React.createElement(\"span\", {\n      style: {\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"222222222\"), this.state.current_location && React.createElement(\"p\", {\n      className: \"weather__key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"weather__value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \" \", this.state.current_location, \" \")), this.state.error && React.createElement(\"p\", {\n      className: \"weather__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.state.error))));\n  }\n\n  handleInputChange1(e) {\n    var tmp_img = '';\n    console.log(e.target.value); //\t\tconst city = e.target.elements.city.value;\n    //\t \tconst country = e.target.elements.country.value;\n\n    console.log(\"111\");\n    this.setState({\n      user_city: e.target.value\n    });\n    console.log(\"222\");\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    fetch(\"http://api.openweathermap.org/data/2.5/weather?q=\" + e.target.value + \",\" + this.state.user_country + \"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json()).then(json => {\n      console.log(json);\n\n      if (json.main.length == 0) {\n        return false;\n      }\n\n      var tmp_temp = parseInt(json.main.temp * 1.8 + 32);\n      console.log(\"this is weather \" + tmp_temp);\n      this.setState({\n        news: json.weather[0],\n        temperature: tmp_temp,\n        city: json.name,\n        humidity: json.main.humidity,\n        country: json.sys.country,\n        error: \"\"\n      });\n      console.log(\"333\");\n      tmp_img = json.weather[0].description;\n      console.log(tmp_img.indexOf(\"haze\") != -1);\n\n      if (tmp_img.indexOf(\"cloud\") != -1) {\n        this.setState({\n          img: \"cloudy.png\"\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"haze\") != -1) {\n        this.setState({\n          img: \"haze.png\"\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"sunny\") != -1) {\n        this.setState({\n          img: \"sunny.png\"\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"rain\") != -1) {\n        this.setState({\n          img: \"raining.png\"\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"snow\") != -1) {\n        this.setState({\n          img: \"snowing.png\"\n        });\n        return true;\n      }\n\n      if (tmp_img.indexOf(\"storm\") != -1) {\n        this.setState({\n          img: \"storm.png\"\n        });\n        return true;\n      }\n\n      this.setState({\n        img: \"sky.png\"\n      });\n    });\n  }\n\n  handleInputChange2(e) {\n    console.log(e.target.value); //\t\tconst city = e.target.elements.city.value;\n    //\t \tconst country = e.target.elements.country.value;\n\n    console.log(\"111\");\n    this.setState({\n      user_country: e.target.value\n    });\n    console.log(\"222\");\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    fetch(\"http://api.openweathermap.org/data/2.5/weather?q=\" + this.state.user_city + \",\" + e.target.value + \"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json()).then(json => {\n      var tmp_temp = parseInt(json.main.temp * 1.8 + 32);\n      this.setState({\n        news: json.weather[0],\n        temperature: tmp_temp,\n        city: json.name,\n        humidity: json.main.humidity,\n        country: json.sys.country,\n        error: \"\"\n      });\n    });\n    console.log(\"333\");\n  }\n\n}","map":{"version":3,"sources":["C:/cs/pulmonic plus/english-news-website/src/components/home/content/weatherModule/pcWeather.js"],"names":["React","Card","Tabs","Router","Route","Link","browserHistory","WeatherTitles","WeatherForm","WeatherResult","PCWeather","Component","constructor","state","news","latitude","longitude","type","adv","city","undefined","temperature","data","humidity","weather","error","country","user_city","user_country","user_address","img","getType","key","console","log","tmp_img","arr","split","reg","replace","setState","myFetchOptions","method","fetch","then","response","json","tmp_temp","parseInt","main","temp","name","sys","description","indexOf","componentWillMount","render","settings2","dots","infinite","autoplayInterval","slidesToShow","slidesToScroll","autoplay","marginBottom","handleInputChange1","bind","handleInputChange2","marginLeft","marginTop","color","require","width","fontSize","fontweight","float","current_location","e","target","value","length"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Card} from 'antd';\r\nimport {Tabs} from 'antd';\r\nimport {Router, Route, Link, browserHistory} from 'react-router'\r\nimport WeatherTitles from \"./weather_titles\";\r\nimport WeatherForm from \"./weather_form\";\r\nimport WeatherResult from \"./weather_result\";\r\n//import WeatherDemo from './weather_demo';\r\n\r\nexport default class PCWeather extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tnews: '',\r\n\t\t\tlatitude: '',\r\n\t\t\tlongitude:'',\r\n\t\t\ttype:'',\r\n\t\t\tadv: 6,\r\n\t\t\tcity:undefined,\r\n\t\t\ttemperature: undefined,\r\n\t\t\tdata: undefined,\r\n\t\t\thumidity: undefined,\r\n\t\t\tweather: undefined,\r\n\t\t\terror: undefined,\r\n\t\t\tcountry:undefined,\r\n\t\t\tuser_city:'',\r\n\t\t\tuser_country:'America',\r\n\t\t\tuser_address:'',\r\n\t\t\timg:'cloudy.png'\r\n\t\t};\r\n\t}\r\n\r\n\tgetType(key) {\r\n\tconsole.log(\"eee\")\r\n\tconsole.log( \"father\"+ key);\r\n\tvar tmp_img = '';\r\n\t// 这里已经拿到子组件给的地址参数在key 现在就是把key中的dallas提取出来 然后给api读取气候\r\n\tvar arr=key.split(\", \");\r\n\r\n\tvar reg =/[\\u4e00-\\u9fa5]/g;\r\n\r\n  console.log(key.replace(reg, \"\"));\r\n\tkey=key.replace(reg, \"\");\r\n \tthis.setState(\r\n\t\t{\r\n\t\t\tuser_city: arr[1],\r\n\t  \tuser_address: key\r\n\t\t } // arr[1]保存了字符串地址解析出来以后剩下的dallas\r\n\t\t\t);\r\n\r\n\tvar myFetchOptions = {\r\n\t\tmethod: 'GET'\r\n\t};\r\n\r\n\tfetch(\"http://api.openweathermap.org/data/2.5/weather?q=\"+arr[1]+\",\"+this.state.user_country+\"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json())\r\n\t.then(json =>\r\n\t\t{\r\n\t\t\tvar tmp_temp = parseInt(json.main.temp*1.8+32);\r\n\t\t\tthis.setState(\r\n\t\t{\r\n\t\t\t news: json.weather[0],\r\n\t\t\t temperature: tmp_temp,\r\n\t\t\t city: json.name,\r\n\t\t\t humidity: json.main.humidity,\r\n\t\t\t country: json.sys.country,\r\n\t\t\t error: \"\"\r\n\t\t});\r\n\r\n\t\ttmp_img=json.weather[0].description;\r\n\t\tconsole.log(tmp_img.indexOf(\"haze\")!= -1 );\r\n\t\tif (tmp_img.indexOf(\"cloud\")!= -1) {\r\n\t\t\tthis.setState({img:'cloudy.png'});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (tmp_img.indexOf(\"haze\")!= -1) {\r\n\t\t\t\tthis.setState({img:'haze.png'});\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\tif (tmp_img.indexOf(\"sunny\")!= -1) {\r\n\t\t\t\t\tthis.setState({img:'sunny.png'});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\tif (tmp_img.indexOf(\"rain\")!= -1) {\r\n\t\t\t\t\t\tthis.setState({img:'raining.png'});\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\tif (tmp_img.indexOf(\"snow\")!= -1) {\r\n\t\t\t\t\t\t\tthis.setState({img:'snowing.png'});\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\tif (tmp_img.indexOf(\"storm\")!= -1) {\r\n\t\t\t\t\t\t\t\tthis.setState({img:'storm.png'});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\tthis.setState({img:'sky.png'});\r\n\r\n\r\n\t\t\t\t\t})  }\r\n\r\n\r\n\tcomponentWillMount() {\r\n\t\tvar tmp_img = '';\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\r\n\t\tfetch(\"http://api.openweathermap.org/data/2.5/weather?q=dallas,america&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json())\r\n\t\t.then(json =>{\r\n\t\t\tvar tmp_temp = parseInt(json.main.temp*1.8+32);\r\n\t\t\t this.setState(\r\n\t\t\t{\r\n\t\t\t\t news: json.weather[0],\r\n\t\t\t\t temperature: tmp_temp,\r\n\t\t\t\t city: json.name,\r\n\t\t\t\t humidity: json.main.humidity,\r\n\t\t\t\t country: json.sys.country,\r\n\t\t\t\t error: \"\"\r\n\t\t\t})\r\n\t\t\tconsole.log(json.weather[0].description);\r\n\t\t\ttmp_img=json.weather[0].description;\r\n\t\t\tconsole.log(tmp_img.indexOf(\"haze\")!= -1 );\r\n\t\t\tif (tmp_img.indexOf(\"cloud\")!= -1) {\r\n\t\t\t\tthis.setState({img:'cloudy.png'});\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"haze\")!= -1) {\r\n\t\t\t\t\tthis.setState({img:'haze.png'});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"sunny\")!= -1) {\r\n\t\t\t\t\t\tthis.setState({img:'sunny.png'});\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"rain\")!= -1) {\r\n\t\t\t\t\t\t\tthis.setState({img:'raining.png'});\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"snow\")!= -1) {\r\n\t\t\t\t\t\t\t\tthis.setState({img:'snowing.png'});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"storm\")!= -1) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({img:'storm.png'});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\tthis.setState({img:'sky.png'});\r\n\r\n\r\n\t\t\t\t\t\t})  }\r\n\trender() {\r\n\t\tvar settings2 = {\r\n\t\tdots: false,\r\n\t\tinfinite: true,\r\n\t\tautoplayInterval: 6000,\r\n\t\tslidesToShow: 1,\r\n\t\tslidesToScroll: 1,\r\n\t\tautoplay:true\r\n\t};\r\n  console.log(this.state.img);\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<div class=\"topNewsList\" style={{marginBottom: \"33px\"}}>\r\n\t\t{/*\t<WeatherDemo getType={this.getType.bind(this)}/> */}\r\n{/* \t\t<div className=\"col-xs-5 title-container\">\r\n\t\t\t\t<WeatherTitles />\r\n\t\t\t</div>  */}\r\n\r\n\t\t\t<div className=\"col-xs-7 form-container\">\r\n\r\n\t\t\t<form>\r\n\t\t\t\t<input type=\"text\" name=\"city\" placeholder=\"City...\"\r\n\t\t\t\t\t\t\tvalue={this.state.user_city}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange1.bind(this)}\r\n\r\n\t\t\t\t/ >\r\n\t\t\t\t<input type=\"text\" name=\"country\" placeholder=\"Country...\"\r\n\t\t\t\tvalue={this.state.user_country}\r\n\t\t\t\tonChange={this.handleInputChange2.bind(this)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t</form>\r\n\r\n{/*\r\n\t\t\t<WeatherResult\r\n\t\t\ttemperature={this.state.temperature}\r\n\t\t\thumidity={this.state.humidity}\r\n\t\t\tcity={this.state.city}\r\n\t\t\tcountry={this.state.country}\r\n\t\t\tdescription={this.state.news.description}\r\n\t\t\terror={this.state.error}\r\n\t\t\tcurrent_location={this.state.user_address}\r\n\t\t\timg={this.state.img}\r\n\r\n\t\t\t/>\r\n*/}\r\n      <div className=\"weather__info\">\r\n    \t {\r\n    \t \tthis.state.city && \tthis.state.country && <p className=\"weather__key\">\r\n    \t \t\t<span className=\"weather__value\" style={{marginLeft:\"0px\", marginTop:\"0px\"}}> { \tthis.state.city }, { \tthis.state.country }</span>\r\n    \t\t\t<span className=\"weather__value\" style={{marginLeft:\"100px\", marginTop:\"0px\"}}> <span style={{color:\"red\"}}>↑</span> <span style={{color:\"red\"}}> { \tthis.state.temperature+8 },</span>  <span style={{color:\"grey\"}}>↓</span>   <span style={{color:\"grey\"}}> { \tthis.state.temperature-15 }</span></span>\r\n\r\n    \t \t</p>\r\n    \t }\r\n    \t {\r\n\r\n    \t\t\tthis.state.humidity && <p className=\"weather__key\">\r\n\r\n    \t\t<img src={require('../../../../assets/images/droplet.png')} alt=\"logo\" style={{marginLeft:\"-10px\", marginTop:\"5px\", width:\"10%\"}}/>：\r\n    \t\t<span className=\"weather__value\" style={{marginLeft:\"-10px\", marginTop:\"-30px\"}}> { \tthis.state.humidity } </span>\r\n\r\n    \t\t<span className=\"weather__value\" style={{color:\"green\", marginLeft:\"110px\", marginTop:\"-20px\", fontSize:\"60px\", fontweight:\"800\", float:\"right\"}} > { \tthis.state.temperature }℉</span>\r\n    \t\t<img src={require('../../../../assets/images/' + this.state.img)}  alt=\"logo\" style={{marginLeft:\"87px\", marginTop:\"-90px\", width:\"30%\", float: \"left\"}}/>\r\n\r\n    \t\t</p>\r\n    \t }\r\n    \t {\r\n    \t \t\tthis.state.description && <p className=\"weather__key\">\r\n    \t \t\t<span className=\"\"  style={{color:\"blue\",marginLeft:\"20px\", marginTop:\"0px\",width:\"100%\"}}> { \tthis.state.description } </span>\r\n    \t </p>\r\n    \t }\r\n    \t <span style={{color:\"white\"}}>222222222</span>\r\n    \t {\r\n    \t\t\tthis.state.current_location && <p className=\"weather__key\">\r\n    \t\t\t<span className=\"weather__value\" > { \tthis.state.current_location } </span>\r\n    \t </p>\r\n    \t }\r\n\r\n\r\n    \t {\r\n    \t \t\tthis.state.error && <p className=\"weather__error\">{ \tthis.state.error }</p>\r\n    \t }\r\n    \t</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t);\r\n\t};\r\n\r\n\thandleInputChange1(e){\r\n\t\t\t\tvar tmp_img = '';\r\n\t\tconsole.log(e.target.value);\r\n//\t\tconst city = e.target.elements.city.value;\r\n//\t \tconst country = e.target.elements.country.value;\r\n\t\tconsole.log(\"111\");\r\n\t\t this.setState({\r\n\t\t \tuser_city: e.target.value\r\n\r\n\t\t })\r\n\t\tconsole.log(\"222\");\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\r\n\t\tfetch(\"http://api.openweathermap.org/data/2.5/weather?q=\"+e.target.value+\",\"+this.state.user_country+\"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json())\r\n\t\t.then(json => {\r\n      console.log(json);\r\n      if (json.main.length==0){\r\n      return false;}\r\n\t\t\tvar tmp_temp = parseInt(json.main.temp*1.8+32);\r\n\t\t\tconsole.log(\"this is weather \" + tmp_temp);\r\n\t\t\t this.setState(\r\n\t\t\t{\r\n\t\t\t\t news: json.weather[0],\r\n\t\t\t\t temperature: tmp_temp,\r\n\t\t\t\t city: json.name,\r\n\t\t\t\t humidity: json.main.humidity,\r\n\t\t\t\t country: json.sys.country,\r\n\t\t\t\t error: \"\"\r\n\t\t\t});\r\n\t\t\tconsole.log(\"333\");\r\n\t\t\ttmp_img=json.weather[0].description;\r\n\t\t\tconsole.log(tmp_img.indexOf(\"haze\")!= -1 );\r\n\t\t\tif (tmp_img.indexOf(\"cloud\")!= -1) {\r\n\t\t\t\tthis.setState({img:\"cloudy.png\"});\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"haze\")!= -1) {\r\n\t\t\t\t\tthis.setState({img:\"haze.png\"});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"sunny\")!= -1) {\r\n\t\t\t\t\t\tthis.setState({img:\"sunny.png\"});\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"rain\")!= -1) {\r\n\t\t\t\t\t\t\tthis.setState({img:\"raining.png\"});\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"snow\")!= -1) {\r\n\t\t\t\t\t\t\t\tthis.setState({img:\"snowing.png\"});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\tif (tmp_img.indexOf(\"storm\")!= -1) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({img:\"storm.png\"});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\tthis.setState({img:\"sky.png\"});\r\n\r\n\r\n\t\t\t})  }\r\n\r\n\thandleInputChange2(e){\r\n\t\tconsole.log(e.target.value);\r\n//\t\tconst city = e.target.elements.city.value;\r\n//\t \tconst country = e.target.elements.country.value;\r\n\t\tconsole.log(\"111\");\r\n\t\t this.setState({\r\n\t\t\tuser_country: e.target.value\r\n\r\n\t\t })\r\n\t\tconsole.log(\"222\");\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\r\n\t\tfetch(\"http://api.openweathermap.org/data/2.5/weather?q=\"+this.state.user_city+\",\"+e.target.value+\"&appid=afa570de413ba776fbc8c1107a059088&units=metric\", myFetchOptions).then(response => response.json())\r\n\t\t.then(json =>{\r\n\t\t\tvar tmp_temp = parseInt(json.main.temp*1.8+32);\r\n\t\t\t this.setState(\r\n\t\t\t{\r\n\t\t\t\t news: json.weather[0],\r\n\t\t\t\t temperature: tmp_temp,\r\n\t\t\t\t city: json.name,\r\n\t\t\t\t humidity: json.main.humidity,\r\n\t\t\t\t country: json.sys.country,\r\n\t\t\t\t error: \"\"\r\n\t\t\t})});\r\n\t\t\tconsole.log(\"333\");\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}