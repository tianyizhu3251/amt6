{"ast":null,"code":"var _jsxFileName = \"C:\\\\cs\\\\pulmonic plus\\\\english-news-website\\\\src\\\\components\\\\pc_news_detail\\\\commonComments.js\";\nimport React from 'react';\nimport { Row, Col } from 'antd';\nimport { Menu, Icon, Tabs, message, Form, Input, Button, CheckBox, Modal, Card, notification } from 'antd';\nimport './CommonComments.scss';\nconst FormItem = Form.Item;\nconst SubMenu = Menu.SubMenu;\nconst TabPane = Tabs.TabPane;\nconst MenuItemGroup = Menu.ItemGroup;\n\nclass CommonComments extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      comments: ''\n    };\n  }\n\n  componentDidMount() {\n    var myFetchOptions = {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.usertocken\n      }\n    };\n    fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news/\" + this.props.uniquekey + \"/reviews\", myFetchOptions).then(response => response.json()).then(json => {\n      this.setState({\n        comments: json\n      });\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    var formdata = this.props.form.getFieldsValue();\n    let body = {\n      \"newsReviewId\": this.props.uniquekey,\n      \"rating\": 0,\n      \"reviewComments\": formdata.remark\n    };\n    body = JSON.stringify(body, null, 2);\n    console.log(body);\n    var myFetchOptions = {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.usertocken,\n        'Content-Type': \"application/json\"\n      },\n      body\n    };\n    /* \t\tnewsReviewId: this.props.uniquekey,\r\n    \t\trating:0,\r\n    \treviewComments: formdata.remark */\n\n    fetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news/\" + this.props.uniquekey + \"/reviews\", myFetchOptions).then(response => {\n      console.log(response.body);\n\n      if (response.status == \"401\") {\n        message.success(\"You should login first\");\n      }\n\n      if (response.status == \"409\") {\n        message.success(\"You have already reviewed this article! \");\n      }\n\n      if (response.status == \"201\") {\n        message.success(\"Review success! \");\n      }\n\n      this.componentDidMount();\n    });\n  }\n\n  addUserCollection() {\n    var myFetchOptions = {\n      method: 'GET'\n    };\n    fetch(\"http://newsapi.gugujiankong.com/Handler.ashx?action=uc&userid=\" + localStorage.userid + \"&uniquekey=\" + this.props.uniquekey, myFetchOptions).then(response => response.json()).then(json => {\n      //收藏成功以后进行一下全局的提醒\n      notification['success']({\n        message: 'ReactNews提醒',\n        description: '收藏此文章成功'\n      });\n    });\n  }\n\n  render() {\n    let {\n      getFieldProps\n    } = this.props.form;\n    const {\n      comments\n    } = this.state;\n    const commnetList = comments.length ? comments.map((comment, index) => React.createElement(Card, {\n      key: index,\n      title: comment.userName,\n      extra: React.createElement(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \" updated on \", comment.updatedDate, \" \"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, comment.reviewComments))) : 'There is no reviews now. Want to see review or post by yourself? Just log in Please ! ';\n    return React.createElement(\"div\", {\n      className: \"comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, commnetList, React.createElement(\"div\", {\n      class: \"write-review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Card, {\n      key: 1,\n      title: 'user comment',\n      extra: React.createElement(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \" updated on  \"),\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(FormItem, {\n      label: \"Your Review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Input, Object.assign({\n      type: \"textarea\",\n      placeholder: \"Please write your idea\"\n    }, getFieldProps('remark', {\n      initialValue: ''\n    }), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }))), React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Submit My review\"), \"\\xA0\\xA0\", React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"button\",\n      onClick: this.addUserCollection.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Save to my favourite\")))))));\n  }\n\n}\n\nexport default CommonComments = Form.create({})(CommonComments);","map":{"version":3,"sources":["C:/cs/pulmonic plus/english-news-website/src/components/pc_news_detail/commonComments.js"],"names":["React","Row","Col","Menu","Icon","Tabs","message","Form","Input","Button","CheckBox","Modal","Card","notification","FormItem","Item","SubMenu","TabPane","MenuItemGroup","ItemGroup","CommonComments","Component","constructor","state","comments","componentDidMount","myFetchOptions","method","headers","localStorage","usertocken","fetch","props","uniquekey","then","response","json","setState","handleSubmit","e","preventDefault","formdata","form","getFieldsValue","body","remark","JSON","stringify","console","log","status","success","addUserCollection","userid","description","render","getFieldProps","commnetList","length","map","comment","index","userName","updatedDate","reviewComments","bind","initialValue","create"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Row, Col} from 'antd';\r\nimport {\r\n\tMenu,\r\n\tIcon,\r\n\tTabs,\r\n\tmessage,\r\n\tForm,\r\n\tInput,\r\n\tButton,\r\n\tCheckBox,\r\n\tModal,\r\n\tCard,\r\n\tnotification\r\n} from 'antd';\r\nimport './CommonComments.scss';\r\nconst FormItem = Form.Item;\r\nconst SubMenu = Menu.SubMenu;\r\nconst TabPane = Tabs.TabPane;\r\nconst MenuItemGroup = Menu.ItemGroup;\r\nclass CommonComments extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tcomments: ''\r\n\t\t};\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders:{\r\n\t\t\t\t\t'Authorization': 'Bearer '+ localStorage.usertocken\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news/\" + this.props.uniquekey + \"/reviews\", myFetchOptions).then(response => response.json()).then(json => {\r\n\t\t\tthis.setState({comments: json});\r\n\t\t});\r\n\t};\r\n\thandleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\t\tvar formdata = this.props.form.getFieldsValue();\r\n\t\t\tlet body={\r\n\t\t\t\t\"newsReviewId\": this.props.uniquekey,\r\n\t\t\t\t\"rating\": 0,\r\n\t\t\t\t\"reviewComments\": formdata.remark\r\n\t\t\t\t};\r\n\t\t\t\tbody = JSON.stringify(body, null, 2);\r\n\r\n\t\t\t\tconsole.log(body);\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders:{\r\n\t\t\t\t\t'Authorization': 'Bearer '+ localStorage.usertocken,\r\n\t\t\t\t\t'Content-Type': \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody\r\n\t\t};\r\n\t\t/* \t\tnewsReviewId: this.props.uniquekey,\r\n\t\t\t\trating:0,\r\n\t\t\treviewComments: formdata.remark */\r\n\r\n\t\tfetch(\"https://api.americanmuslimtoday.net/amt-news/api/v1/news/\"+ this.props.uniquekey+ \"/reviews\", myFetchOptions)\r\n\t\t.then(response =>{\r\n\tconsole.log(response.body);\r\n\tif (response.status==\"401\") {\r\n\t\tmessage.success(\"You should login first\");\r\n\t}\r\n\tif (response.status==\"409\") {\r\n\t\tmessage.success(\"You have already reviewed this article! \");\r\n\t}\r\n\tif (response.status==\"201\") {\r\n\t\tmessage.success(\"Review success! \");\r\n\r\n\t}\r\n\t\tthis.componentDidMount();\r\n\t\t})\r\n\t};\r\n\taddUserCollection() {\r\n\t\tvar myFetchOptions = {\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\t\tfetch(\"http://newsapi.gugujiankong.com/Handler.ashx?action=uc&userid=\" + localStorage.userid + \"&uniquekey=\" + this.props.uniquekey, myFetchOptions).then(response => response.json()).then(json => {\r\n\t\t\t//收藏成功以后进行一下全局的提醒\r\n\t\t\tnotification['success']({message: 'ReactNews提醒', description: '收藏此文章成功'});\r\n\t\t});\r\n\t};\r\n\trender() {\r\n\t\tlet {getFieldProps} = this.props.form;\r\n\t\tconst {comments} = this.state;\r\n\t\tconst commnetList = comments.length\r\n\t\t\t? comments.map((comment, index) => (\r\n\t\t\t\t<Card key={index} title={comment.userName} extra={< a href = \"#\" > updated on {comment.updatedDate} < /a>}>\r\n\t\t\t\t\t<p>{comment.reviewComments}</p>\r\n\t\t\t\t</Card>\r\n\t\t\t))\r\n\t\t\t: 'There is no reviews now. Want to see review or post by yourself? Just log in Please ! ';\r\n\t\treturn (\r\n\t\t\t<div className=\"comment\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t{commnetList}\r\n\t\t\t\t\t\t<div class=\"write-review\">\r\n            <Card key={1} title={'user comment'} extra={< a href = \"#\" > updated on  < /a>} className=\"card\">\r\n\t\t\t\t\t\t<Form onSubmit ={this.handleSubmit.bind(this)}>\r\n\t\t\t\t\t\t\t<FormItem label=\"Your Review\">\r\n\t\t\t\t\t\t\t\t<Input type=\"textarea\" placeholder=\"Please write your idea\" {...getFieldProps('remark',{initialValue: ''})}/>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">Submit My review</Button>\r\n\t\t\t\t\t\t\t&nbsp;&nbsp;\r\n\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"button\" onClick={this.addUserCollection.bind(this)}>Save to my favourite</Button>\r\n\t\t\t\t\t\t</Form>\r\n            </Card>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n}\r\nexport default CommonComments = Form.create({})(CommonComments);\r\n"]},"metadata":{},"sourceType":"module"}